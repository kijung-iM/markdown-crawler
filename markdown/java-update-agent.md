에이전트 업데이트
=========

최신 버전 에이전트 다운로드[​](#최신-버전-에이전트-다운로드 "최신 버전 에이전트 다운로드에 대한 직접 링크")
----------------------------------------------------------------

1. [와탭 모니터링 서비스](https://service.whatap.io)로 이동해 로그인하세요.
2. 에이전트를 업데이트할 프로젝트를 선택하세요.
3. 왼쪽 메뉴에서 관리 > 에이전트 업데이트를 선택하세요.
4. 최신 버전 또는 최신 버전으로 모든 에이전트에 다운로드 버튼을 클릭하세요.

![에이전트 업데이트](/img/java-update-agent.png)

에이전트를 다운로드한 다음 애플리케이션 서버를 다시 시작하세요. 업데이트를 자동 적용합니다.

에이전트 업데이트 자동 설정[​](#에이전트-업데이트-자동-설정 "에이전트 업데이트 자동 설정에 대한 직접 링크")
----------------------------------------------------------------

자바 에이전트를 업데이트하려면 서버를 재시작해야 합니다. 재시작 이전에 *whatap.agent.jar* 파일이 변경되면 애플리케이션 서버가 재시작되는 과정에서 안정적인 시스템 종료(shutdown)를 실패할 수 있습니다.

원칙적으로 자바 에이전트를 업데이트 하기 위해서는 다음의 순서로 진행해야 합니다.

1. app shutdown
2. agent jar 변경
3. app start

위 과정을 보다 쉽게 처리하기 위해 와탭의 에이전트 jar 파일명에는 버전 번호를 포함합니다. 업데이트 과정에서 최신 버전을 자동 적용하도록 설정하는 것이 중요합니다.


```
########## WHATAP ############  
WHATAP_HOME=/whatap  
WHATAP_JAR=`ls ${WHATAP_HOME}/whatap.agent-*.jar | sort -V | tail -1`  
JAVA_OPTS="${JAVA_OPTS} -javaagent:${WHATAP_JAR} "  
########## WHATAP ############  

```
